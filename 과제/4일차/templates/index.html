{% extends "base.html" %}

{% block title %}블로그 목록 | blog_practice{% endblock %}

{% block content %}
  <h1 class="text-2xl font-bold mb-4">글 목록</h1>

  {% if avg_rating is not none %}
    <p class="mb-4 text-sm text-slate-700">
      ⭐ 평균 별점:
      <span class="font-semibold">{{ "%.1f"|format(avg_rating) }}</span>
    </p>
  {% endif %}

  <div class="space-y-4">
    {% if posts %}
      {% for p in posts %}
        <article class="bg-white rounded-lg shadow-sm border border-slate-200 px-5 py-4">
          <h2 class="text-lg font-semibold">{{ p.title }}</h2>
          <p class="mt-2 text-sm text-slate-700 whitespace-pre-line">
            {{ p.content }}
          </p>
          {% if p.rating is not none %}
            <p class="mt-2 text-sm text-amber-500">
              ⭐ {{ p.rating }}
            </p>
          {% endif %}
          <div class="mt-3 text-sm space-x-3">
            <a
              href="{{ url_for('posts.edit_post', post_id=p.id) }}"
              class="text-sky-500 hover:underline"
            >
              수정
            </a>
            <a
              href="{{ url_for('posts.delete_post', post_id=p.id) }}"
              class="text-rose-500 hover:underline"
            >
              삭제
            </a>
          </div>
        </article>
      {% endfor %}
    {% else %}
      <p class="text-center text-slate-500 bg-white py-10 rounded-lg shadow-sm">
        아직 글이 없습니다. 상단의 <strong>새 글 작성</strong> 버튼으로 첫 글을 남겨보세요!
      </p>
    {% endif %}
  </div>
{% endblock %}
